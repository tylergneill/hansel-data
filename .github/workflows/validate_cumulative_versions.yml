name: Validate Cumulative File Versions

on:
  push:
    paths:
      - 'VERSION'
      - 'texts/masters/txt/**'
      - 'texts/transforms/**'
      - 'metadata/**'
  workflow_dispatch:

jobs:
  validate-cumulative-file-versions:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' # Assuming Python 3.11 is used

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt  # Assuming requirements.txt is needed for lxml, etc.

      - name: Set execute permission for validation script
        run: chmod +x .github/scripts/validate_cumulative_versions.sh

      - name: Run validation script
        run: .github/scripts/validate_cumulative_versions.sh
